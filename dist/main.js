(()=>{"use strict";function t(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(n){t(1,arguments);var o=Object.prototype.toString.call(n);return n instanceof Date||"object"===e(n)&&"[object Date]"===o?new Date(n.getTime()):"number"==typeof n||"[object Number]"===o?new Date(n):("string"!=typeof n&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function o(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function r(e){t(1,arguments);var r=o(e);return n(1e3*r)}const c=document.querySelector(".current-city"),a=document.querySelector(".country"),s=document.querySelector(".current-temp"),i=document.querySelector(".feels-like"),u=document.querySelector(".humidity"),l=document.querySelector(".sunrise"),d=document.querySelector(".sunset"),m=document.querySelector(".description"),p=document.querySelector(".grid-wrapper"),y=document.querySelectorAll("[data-weekday] .weekly-temp"),f=document.querySelectorAll(".icon"),w=document.querySelectorAll(".week-date");async function h(t){const{convertedSunrise:e,convertedSunset:n}=(o=t.sys.sunrise,p=t.sys.sunset,{convertedSunrise:r(o),convertedSunset:r(p)});var o,p;c.textContent=t.name,s.textContent=t.main.temp,i.textContent=t.main.feels_like,m.textContent=t.weather[0].description,u.textContent=t.main.humidity,a.textContent=t.sys.country,l.textContent=e,d.textContent=n}async function b(t){const e=t.list.filter((t=>t.dt_txt.includes("12:00:00")));for(let t=0;t<=4;t++){const n=`https://openweathermap.org/img/wn/${e[t].weather[0].icon}@2x.png`;f[t].src=n,y[t].textContent=`${e[t].main.temp}`;const o=`${e[t].dt_txt.replaceAll("12:00:00","")}`,[r,c,a]=o.split("-"),s=[c,a,r].join("/ ");w[t].textContent=s}}async function S(t){const e=t.dt,{sunrise:n,sunset:o}=t.sys;p.style.backgroundImage=e>=n&&e<o?"url(assets/aaron-burden-BTubi6qaY6Q-unsplash.jpg)":"url(assets/mason-field-efLEMOPlPW8-unsplash.jpg)"}const g=document.querySelector(".search-field");async function C(t,e,n="metric"){const o=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&units=${n}&appid=9233d7d5b5dca12db8dc4eccb6554d50`,{mode:"cors"});return await o.json()}async function q(t,e,n="metric"){const o=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${e}&units=${n}&appid=9233d7d5b5dca12db8dc4eccb6554d50`,{mode:"cors"});return await o.json()}const x=document.querySelector(".search-field"),v=document.querySelector(".search-button"),j=document.querySelector(".measurement-switch"),k=document.querySelector(".measurement-switch span"),$=document.querySelectorAll(".temp-unit");let E,N;async function D(){let t;"F"===k.textContent?(t="imperial",k.textContent="C",$.forEach((t=>{t.textContent="F"}))):"C"===k.textContent&&(t="metric",k.textContent="F",$.textContent="C",$.forEach((t=>{t.textContent="C"})));const e=await C(E,N,t),n=await q(E,N,t);h(e),S(e),b(n)}window.onload=async()=>{const t=await new Promise(((t,e)=>{navigator.geolocation.getCurrentPosition(t,e)}));E=t.coords.latitude,N=t.coords.longitude;const e=await C(E,N);h(e),S(e);const n=await q(E,N);$.forEach((t=>{t.textContent="C"})),b(n)},j.addEventListener("click",D),v.addEventListener("click",D),v.addEventListener("click",(async function(t){t.preventDefault();const{lat:e,lon:n}=await async function(){const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${g.value}&limit=3&appid=9233d7d5b5dca12db8dc4eccb6554d50`,{mode:"cors"}),e=await t.json(),{lat:n,lon:o}=e[0]||e;return{lat:n,lon:o}}();E=e,N=n;const o=await C(E,N);h(o),S(o);const r=await q(E,N);D(),b(r),x.value=""}))})();